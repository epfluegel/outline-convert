<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<opml version="2.0">
    <head>
        <title>Â Securing The Apache Webserver</title>
        <flavor>dynalist</flavor>
        <source>https://dynalist.io</source>
        <ownerName>Eckhard</ownerName>
        <ownerEmail>e.pfluegel@gmail.com</ownerEmail>
    </head>
    <body>
        <outline text="Scenario: Alice works for an organisation and is in charge of securely configuring and maintaining the company's web server. Today, she is working on a fresh installation of the system and needs to download Apache if necessary, and use suitable security tools in order to create a self-signed certificate for installation with Apache. "/>
        <outline text="She is based on a Linux environment, and has decided to proceed along the following five steps:">
            <outline text="Step 1: Enable Apache on the system. #level1 ">
                <outline text="You might not need to install Apache. You can verify the existence or successful installation of Apache using a web browser. ">
                    <outline text="Xubuntu does not have Apache, but Kali does (but needs starting up)"/>
                    <outline text="Type `localhost` into your browser address bar. You need to be able to see a generic test home page. "/>
                </outline>
            </outline>
            <outline text="Step 2: Enable the Apache ssl module. #level1 ">
                <outline text="To do this, type `sudo a2enmod ssl` on the command line. "/>
                <outline text="Then type either `sudo /etc/init.d/apache2 restart` or `sudo service apache2 restart` or `sudo systemctl apache2 restart` to restart apache."/>
            </outline>
            <outline text="Step 3: Create a self-signed certificate, based on using a suitable tool.  #level1 ">
                <outline text="(a) Generate a private key with the `openssl` tool. ">
                    <outline text="This requires further terminal commands (two different instructions, depending on the key size you want to have).">
                        <outline text="`openssl -des3 -out server.key 1024`"/>
                        <outline text="`openssl -des3 -out server.key 2048`"/>
                    </outline>
                    <outline text="You might have to enter a passphrase for your key and verify."/>
                </outline>
                <outline text="(b) Create a CSR (Certificate Signing Request).">
                    <outline text="This requires further terminal commands.">
                        <outline text="`openssl -new -key server.key -sha256  -out server.csr`"/>
                    </outline>
                    <outline text="Enter your chosen passphrase when prompted, and the X.509 attributes of the certificate - `Common Name` is your server's host/website name."/>
                    <outline text="The CSR in the file `server.csr` is generated."/>
                </outline>
                <outline text="(c) Generate a self-signed certificate by self-signing the CSR.">
                    <outline text="This requires further terminal commands.">
                        <outline text="`openssl x509 -req -days 365 -in server.csr -signkey server.key -out server.crt`"/>
                    </outline>
                    <outline text="Enter your chosen passphrase when prompted. The certificate  gets generated in `server.crt`."/>
                </outline>
            </outline>
            <outline text="Step 4: Configure SSL on Apache accordingly. #level1 ">
                <outline text="The private key and the certificate need to be copied to 2 locations on the system file space, referred to as `/path/to/your_private.key` and `/path/to/your_domain_name.crt`. They could be in your home directory, or in `/var/www`. "/>
                <outline text="Edit the Apache configuration file by typing `nano /etc/apache2/apache.conf` and then adding references to these locations. "/>
                <outline text="These lines need to be added to the configuation file:">
                    <outline text="`&lt;VirtualHost *:443&gt;`">
                        <outline text="`ServerName your_server`">
                            <outline text="`SSLEngine on`"/>
                            <outline text="`SSLCertificateFile /path/to/your_domain_name.crt`"/>
                            <outline text="`SSLCertificateKeyFile /path/to/your_private.key`"/>
                        </outline>
                        <outline text="`&lt;/VirtualHost&gt;`"/>
                    </outline>
                </outline>
                <outline text="Then restart Apache. "/>
            </outline>
            <outline text="Step 5: Verify the secure connection. #level1 "/>
        </outline>
    </body>
</opml>
